# Фаза 6: Екосистема, Сумісність та 3D (Ecosystem, Interoperability & 3D)

**Мета:** Перетворити "Малювальник" на відкриту, розширювану платформу, сумісну з промисловими стандартами, та закласти фундамент для роботи в трьох вимірах.

## 6.1. Повна сумісність з DXF/DWG

**[ПЕРЕНЕСЕНО до Фази 1]** Цей функціонал став пріоритетним і його розробка запланована в рамках Фази 1 як основний метод роботи з файлами.

## 6.2. Платформа для спільної роботи в реальному часі (Cloud Version)

**Мета:** Створити хмарну версію додатку з можливістю командної роботи над проєктами.

- [ ] **Розробка архітектури бекенду:**
    - [ ] Проєктування API на Node.js (NestJS/Express).
    - [ ] Вибір бази даних (PostgreSQL для реляційних даних, MongoDB для гнучкості).
    - [ ] Реалізація сервера WebSocket для обміну даними в реальному часі.

- [ ] **Система користувачів та проєктів:**
    - [ ] Розробити автентифікацію та авторизацію (JWT).
    - [ ] Створити панель управління проєктами (створення, доступ, версії).

- [ ] **Двигун для спільної роботи:**
    - [ ] **(Ключове дослідження)** Вибір та імплементація підходу для синхронізації змін: **Operational Transformation (OT)** або **Conflict-free Replicated Data Types (CRDTs)**.
    - [ ] Реалізація механізму "транзакцій" для атомарного застосування змін.

## 6.3. API для скриптів та плагінів

**Мета:** Надати користувачам та розробникам можливість розширювати функціонал додатку.

- [ ] **Розробка публічного API:**
    - [ ] Створити стабільний JavaScript/TypeScript API для доступу до сцени, об'єктів та інструментів.
    - [ ] Написати вичерпну документацію для API.

- [ ] **Інтеграція скриптового рушія:**
    - [ ] Вбудувати в додаток консоль для виконання скриптів.
    - [ ] Розробити систему завантаження користувацьких скриптів для автоматизації рутинних задач.

- [ ] **Архітектура плагінів:**
    - [ ] Спроектувати систему, що дозволяє завантажувати сторонні плагіни, які можуть додавати нові інструменти, панелі та команди.

## 6.4. Перехід до 3D

**Мета:** Розширити можливості додатку для роботи з тривимірною геометрією.

**Технологічний стек:**
- **`Three.js` / `Babylon.js`:** Високорівневі WebGL-бібліотеки для 3D-рендерингу.

- [ ] **Фундамент 3D-рушія:**
    - [ ] Інтегрувати `Three.js` та створити новий `Canvas3DController`.
    - [ ] Реалізувати базову 3D-сцену, камеру (орбітальну, від першої особи) та освітлення.
    - [ ] Розробити механізм перемикання між 2D- та 3D-виглядами.

- [ ] **Базові 3D-можливості:**
    - [ ] **Екструзія 2D-планів:** Створити інструмент, що дозволяє "видавлювати" замкнуті полілінії та стіни для отримання об'ємної моделі.
    - [ ] **Примітивне моделювання:** Додати інструменти для створення базових 3D-примітивів (куб, сфера, циліндр).

## 6.5. Оптимізація продуктивності для великих проєктів

**Мета:** Забезпечити плавну роботу додатку з кресленнями, що містять десятки тисяч об'єктів.
- [ ] Оптимізація всього.

- [ ] **Просторова індексація:**
    - [ ] Впровадити структури даних, такі як **Quadtree** (для 2D) або **Octree** (для 3D), для швидкого пошуку об'єктів у видимій області та прискоренння операцій прив'язки.

- [ ] **Оптимізація рендерингу:**
    - [ ] Реалізувати відсікання невидимої геометрії (frustum culling).
    - [ ] Впровадити рівні деталізації (LODs) для складних блоків.

- [ ] **Перенесення обчислень у WebAssembly (WASM):**
    - [ ] **(Дослідження)** Визначити "вузькі місця" в обчислювальній геометрії (напр., операції `JSTS`) та переписати їх на Rust або C++ з компіляцією в WASM для досягнення нативної продуктивності.