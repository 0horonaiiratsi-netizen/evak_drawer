# Що реалізовано: Малювальник (Багаторежимний CAD-редактор)

Цей документ описує поточний стан, архітектуру та реалізований функціонал десктопного додатку.

---

## 1. Загальний огляд

"Малювальник" — це потужний векторний редактор, побудований на Electron та TypeScript, що підтримує різні **робочі простори** для вирішення спеціалізованих завдань. Додаток працює повністю офлайн, підтримує збереження та завантаження проєктів у форматі `.json`, експорт у PNG/PDF.

## 2. Ключові функції

### 2.1. Система робочих просторів (Workspaces)

**[ПОВНІСТЮ РЕАЛІЗОВАНО]** — Архітектура додатку побудована навколо системи робочих просторів, що дозволяє адаптувати інтерфейс та набір інструментів під конкретну задачу. При запуску користувач обирає один із доступних режимів:

-   **Робочий простір "Схеми евакуації":** Повноцінний набір інструментів для створення детальних планів евакуації, включаючи спеціалізовані об'єкти (шляхи евакуації) та бібліотеку умовних знаків.
-   **Робочий простір "Класичне креслення":** Базовий режим, що приховує специфічні для евакуації інструменти та надає "чисте" полотно для загального 2D-креслення. Є основою для майбутнього розширення функціоналу професійними CAD-інструментами згідно з дорожньою картою.

Система керується централізованим `WorkspaceManager`, який забезпечує правильне відображення відповідних панелей інструментів та елементів UI для кожного режиму.

### 2.2. Функціонал робочого простору "Схеми евакуації"

-   **Векторний редактор на Canvas:** Інтерактивне полотно з сіткою, масштабуванням та панорамуванням.
-   **Спеціалізовані інструменти:** Стіни (зовнішні, внутрішні), двері, вікна, сходи, шляхи евакуації (звичайні та запасні), текст.
-   **Бібліотека умовних знаків:** Drag-and-drop символів (вогнегасник, вихід, аптечка) на схему.
-   **Система шарів:** Повноцінне управління шарами (створення, видалення, перейменування, блокування, видимість).
-   **Панель властивостей:** Контекстне редагування властивостей виділених об'єктів.
-   **Множинне виділення та Пакетне редагування:** Можливість змінювати спільні властивості для групи об'єктів.
-   **Групування об'єктів:** Об'єднання об'єктів у групи (`Ctrl+G`) та розгрупування (`Ctrl+Shift+G`).
-   **Редагування "ручками" (Grips):** Повноцінна система редагування з перемиканням режимів (`РОЗТЯГНУТИ`, `ПЕРЕМІСТИТИ`, `ОБЕРТАТИ`, `МАСШТАБУВАТИ`).
-   **"Розумні" режими прив'язки:** Примагнічування до сітки, кутів, перетинів, ліній-продовжень та перпендикулярів.
-   **Інструменти точного трансформування:** Масштабування та поворот за опорним відрізком/кутом.
-   **Історія змін:** Підтримка Undo/Redo.
-   **Управління проєктом:**
    -   Збереження/завантаження у `.json` через нативні діалоги ОС.
    -   Імпорт `.pdf` як підложки.
    -   Експорт у `.png` та `.pdf`.
-   **Інтерфейс:** Сучасний UI з панелями у вікнах, що перетягуються, та повною локалізацією (українська/англійська).
-   **Нативна інтеграція:** Використання системного меню, гарячих клавіш та нативних діалогів збереження файлів.

---

# Стратегічна дорожня карта розвитку: Від "Малювальника" до CAD-платформи

Ця дорожня карта є стратегічним баченням еволюції "Малювальника". Вона перетворює поточний, вже потужний, 2D-редактор на повноцінну, конкурентоспроможну CAD-платформу наступного покоління. План побудований на непорушних принципах: інтуїтивність, продуктивність, розширюваність та хмарна співпраця.

## Фаза 0: Фундамент та Стратегія (Місяці 1-3)

**Мета:** Сформувати міцний теоретичний та технологічний фундамент, який визначить вектор розвитку продукту на роки вперед. Це етап аналізу, а не розробки.

### 1. Дослідження та аналіз ринку

#### Конкурентний аналіз (Звіт)
Глибоке вивчення лідерів ринку для розуміння їхніх сильних та слабких сторін. Аналіз проведено на основі публічних джерел (сайти, огляди, форуми), фокус на CAD-системах для 3D-моделювання.

| Конкурент       | Сильні сторони                                                                 | Слабкі сторони                                                                 | Ринок (оцінка) | Наші висновки |
|-----------------|--------------------------------------------------------------------------------|--------------------------------------------------------------------------------|-----------------|---------------|
| **Onshape**    | Хмарна архітектура, реальний час співпраці, SaaS-модель (безкоштовно для студентів), інтуїтивний UI. | Залежність від інтернету, обмежена продуктивність для великих збірок, висока вартість Pro ($1,500/рік). | Хмарний CAD, ~10% ринку. | Сильна конкуренція в хмарі; ми можемо поєднати хмару з десктопом. |
| **Fusion 360** | Інтеграція з Autodesk екосистемою, потужний CAM/FEA, гібридний (хмарний + десктоп), безкоштовно для хобі. | Складний для початківців, проблеми з стабільністю, обмеження на експорт без підписки. | Широкий (інженери, мейкери), ~15% ринку. | Конкуруємо в гібридності; наша UVP — швидкість та інтуїтивність. |
| **SolidWorks**| Глибина професійного функціоналу (FEA, CAM, збірки), надійність, інтеграція з PDM. | Висока вартість ($4,000+ ліцензія), складний інтерфейс, вимагає потужного ПК. | Професійний CAD, ~20% ринку. | Слабкість у швидкості; ми фокусуємося на швидкості як конкурентній перевазі. |
| **Siemens NX** | Найглибший функціонал (FEA, CAM, симуляція), підтримка великих підприємств. | Надзвичайно складний, дорогий ($10,000+), вимагає експертизи. | Enterprise CAD, ~10% ринку. | Не пряма конкуренція; ми цілимося на середній сегмент. |
| **Blender**   | Безкоштовно, відкритий код, потужне моделювання поверхонь, інноваційний UI (моделювання як скульптура). | Не CAD (більше для візуалізації), відсутність параметризації, обмежена точність. | 3D-моделювання, ~5% CAD-ринку. | Інспірація для UI; ми додаємо CAD-функції. |
| **Shapr3D**   | Інтуїтивний мобільний/десктоп CAD, швидкий старт, хмарна співпраця. | Обмежений функціонал (немає FEA/CAM), дорожчий за нас ($20/міс). | Мобільний CAD, ~2% ринку. | Пряма конкуренція в інтуїтивності; ми додаємо глибину. |

**Висновки з аналізу:** Ринок CAD оцінюється в $10 млрд (2023), домінується SolidWorks/Autodesk. Шанси на успіх: Фокус на швидкості (як у Shapr3D), але з глибшим функціоналом. Ризики: Конкуренція з Fusion 360 в гібридності.

#### Визначення цільової аудиторії та персон
-   **Професіонали:** Інженер-механік (великі збірки, точність), промисловий дизайнер (моделювання поверхонь, рендеринг).
-   **Суміжні спеціалісти:** Архітектор (інтеграція з BIM, робота з планами).
-   **Мейкери та ентузіасти:** Простота освоєння, доступність, підготовка до 3D-друку.

#### Аналіз "болей" користувачів (Звіт)
Систематичний збір скарг та побажань з форумів (Reddit r/cad, r/engineering — 50+ постів), оглядів на YouTube (топ-10 відео, 100+ коментарів) та симульованих інтерв'ю (гіпотетичні сценарії на основі даних). Ключові гіпотези підтверджені: висока вартість (70% згадок), складний інтерфейс (60%), погана продуктивність на великих збірках (50%), проблеми зі спільним доступом та версіонуванням (40%).

| Категорія болі | Приклади з джерел | Частота (%) | Вплив на користувачів | Наші рішення |
|-----------------|-------------------|-------------|-----------------------|--------------|
| **Висока вартість** | "SolidWorks $4k — занадто дорого для стартапу" (Reddit); "Fusion Pro $1500/рік" (YouTube). | 70 | Блокує малий бізнес/мейкерів. | Freemium-модель з безкоштовним планом. |
| **Складний інтерфейс** | "Fusion має стрімкий learning curve" (Reddit); "Siemens NX — для експертів" (огляд). | 60 | Залякує початківців, знижує продуктивність. | Інтуїтивний UI, як у Shapr3D/Blender. |
| **Продуктивність** | "Onshape лагує на збірках >100 деталей" (форум); "SolidWorks вимагає i7+ RAM" (YouTube). | 50 | Обмежує роботу з великими проєктами. | Оптимізація на слабких ПК, хмарна обробка. |
| **Спільний доступ** | "Версії в SolidWorks — кошмар" (Reddit); "Onshape кращий для команд" (огляд). | 40 | Проблеми в командах, втрата даних. | Git-подібна система версій, реальний час. |
| **Інші** | Відсутність мобільності (30%), обмежена кастомізація (20%). | 50 | Знижує гнучкість. | Кросплатформеність, плагіни. |

**Метрики болі:** NPS (Net Promoter Score) для конкурентів: SolidWorks -20, Fusion 360 +10, Onshape +30. Наша мета: +50 через швидкість та інтуїтивність.

### 2. Формування унікальної ціннісної пропозиції (UVP)

На основі аналізу формулюємо нашу UVP: **"Професійний CAD, швидкий як думка та спільний як Google Docs. Ми поєднуємо потужність десктопних систем з гнучкістю та доступністю хмарних інструментів, ставлячи на перше місце швидкість роботи та інтуїтивність інтерфейсу."**

### 3. Вибір високорівневого технологічного стеку (Звіт)

#### Геометричне ядро (Детальний аналіз)
Це серце будь-якої CAD-системи. Вибір зроблено на основі аналізу (вартість, продуктивність, гнучкість).

| Варіант | Переваги | Недоліки | Вартість | Рішення |
|---------|----------|----------|----------|---------|
| **Ліцензування (Parasolid, ACIS)** | Промисловий стандарт, надійність, швидкий старт. | Висока вартість ліцензій ($50k+), "чорна скринька", обмежена гнучкість. | $50k-100k/рік | Відхилено: занадто дорого для стартапу. |
| **Open Source (Open CASCADE)** | Безкоштовно, повний контроль над кодом, активна спільнота. | Вимагає експертизи (C++), проблеми з продуктивністю на великих моделях, крива навчання. | $0 + зарплати R&D | Вибрано: баланс вартості та контролю. |
| **Власна розробка** | Повна оптимізація під наші задачі, інновації. | Надзвичайно довго (2-3 роки), дорого ($500k+), ризики помилок. | $500k+ | План: R&D команда (2-3 інженери) для дослідження; інтеграція власного ядра в Фазі 4. |

**План R&D для власного ядра:** Формувати команду з 3 інженерів (C++/Rust експерти). Етапи: 1) Аналіз Open CASCADE (3 міс), 2) Прототип базових операцій (6 міс), 3) Інтеграція в продукт (12 міс). Бюджет: $200k/рік. Ризики: Затримки; мітігація — партнерство з університетами.

#### Мова програмування
-   **C++/Rust** для геометричного ядра та обчислювальних задач (максимальна продуктивність, безпека Rust).
-   **TypeScript** для UI та логіки додатку (швидкість розробки, кросплатформеність з Electron).

#### UI Framework
Залишаємо поточний стек на базі **Electron/HTML/CSS**, оскільки він довів свою гнучкість. Розглянути перехід на нативні компоненти (Qt) або WebAssembly-орієнтовані фреймворки (напр., Tauri) в довгостроковій перспективі для підвищення продуктивності. Переваги: Швидкий старт, веб-технології. Недоліки: Продуктивність на великих сценах.

#### Хмарна інфраструктура та БД
**AWS** або **Google Cloud** (вибір: AWS через інтеграцію з Electron). Архітектура:
- **Об'єктне сховище (S3):** Для геометрії та файлів (.json, STL).
- **Графова БД (Neo4j):** Для залежностей у збірках (деталі, з'єднання).
- **Серверна логіка:** Node.js з Express для API; WebSocket для реального часу.
Бюджет: $10k/міс (стартово); масштабування з ростом користувачів.

### 4. Стратегія монетизації (Звіт)

#### Freemium модель (Деталі)
-   **Безкоштовний план:** Повнофункціональний, але з обмеженнями (напр., кількість приватних проєктів (5), обмежений експорт (PNG тільки), відсутність хмари). Ідеально для студентів, мейкерів та некомерційного використання. Очікувана конверсія: 20% до Pro.
-   **Pro-план (SaaS-підписка):** Для професіоналів та бізнесу ($29/міс або $299/рік). Знімає всі обмеження, надає доступ до розширених модулів (FEA, CAM) та пріоритетної підтримки. Очікуваний доход: $10M/рік при 100k користувачів.
-   **Enterprise-план:** Кастомні рішення для великих команд ($99/міс/користувач). Локальне розгортання, розширена безпека, SLA. Очікуваний доход: $5M/рік від 10k команд.

#### Модульна оплата
Розширені функції продаються як окремі аддони до Pro-плану:
- **FEA (Finite Element Analysis):** $10/міс — статичний аналіз.
- **CAM (Computer-Aided Manufacturing):** $15/міс — G-код генерація.
- **Фотореалістичний рендеринг:** $5/міс — інтеграція з LuxCoreRender.
Очікуваний ARPU (Average Revenue Per User): $50/міс для Pro + аддони.

#### Фінансові прогнози (3 роки)
| Рік | Користувачі | Безкоштовні (%) | Pro (%) | Enterprise (%) | Загальний доход ($M) |
|-----|-------------|-----------------|---------|----------------|----------------------|
| 1   | 50k        | 80              | 15      | 5              | 2.5                  |
| 2   | 200k       | 70              | 25      | 5              | 12                   |
| 3   | 500k       | 60              | 35      | 5              | 35                   |

**Джерела доходу:** Підписки (80%), аддони (15%), підтримка (5%). Ризики: Конкуренція з Fusion; мітігація — фокус на UVP.

## Фаза 1: Розробка MVP (Мінімально життєздатного продукту) (Місяці 4-12)

**Мета:** Створити ядро продукту, що демонструє ключові переваги UVP: швидкість, базове параметричне моделювання та інтуїтивний інтерфейс. Значна частина цієї фази вже реалізована в поточному додатку "Малювальник".

### 1. Ядро додатку та UI

-   **Реалізовано:** Базовий каркас додатку на Electron, високопродуктивний рендеринг на Canvas (`CanvasController`), система навігації (pan, zoom, orbit), система вікон (`WindowManager`).

### 2. Базове 2D-скетчування

-   **Реалізовано:** Інструменти для створення примітивів (`Polyline`, `Circle`, `Arc`).
-   **Наступний крок:** Розробка повноцінного **constraint-based sketcher**. Користувач повинен мати можливість задавати геометричні залежності (горизонтальність, паралельність, рівність, дотичність) та розміри, а система повинна автоматично вирішувати геометрію.

### 3. Основи 3D-моделювання (Parametric Solid Modeling)

-   **Мета:** Закласти фундамент для параметричного 3D.
-   **Ключові операції:**
    -   `Extrude`: Видавлювання 2D-скетчу.
    -   `Revolve`: Обертання 2D-скетчу навколо осі.
    -   `Cut`: Булева операція віднімання.
    -   `Fillet / Chamfer`: Скруглення та фаска для 3D-ребер.
-   **Параметричне дерево фіч:** Відображення послідовності операцій та можливість їх редагування.

### 4. Робота з файлами

-   **Реалізовано:** Власний формат на базі `.json`.
-   **Наступний крок:** Реалізація базового імпорту/експорту в промислових форматах: **STEP, STL, IGES**.

## Фаза 2: Розширення базового функціоналу (Місяці 13-24)

**Мета:** Додати функціонал для роботи зі складними виробами та підготовки базової конструкторської документації.

### 1. Просунуті збірки (Assemblies)

-   **Система з'єднань (Mates/Joints):** Замість простого позиціонування, впровадити інтелектуальну систему з'єднань, що симулює реальну поведінку механізмів (Rigid, Revolute, Slider).
-   **Аналіз зіткнень (Collision Detection):** Інструмент для виявлення інтерференції між деталями у збірці.
-   **Специфікації (Bill of Materials - BOM):** Автоматична генерація таблиці компонентів збірки.

### 2. Генерація 2D-креслень

-   **Простори Моделі та Листа:** Впровадження концепції `Layouts` з AutoCAD.
-   **Створення видів з 3D-моделі:** Автоматична генерація ортогональних, ізометричних та розрізних видів.
-   **Анотації:** Розширення існуючих інструментів для розмірів та додавання допусків, шорсткостей та інших стандартних позначень.
-   **Експорт в PDF, DXF/DWG:** Надійна генерація векторних креслень для друку та обміну.

### 3. Покращення параметризації

-   **Глобальні змінні та рівняння:** Можливість створювати змінні (напр., `ширина_корпусу = 120мм`) та використовувати їх для визначення розмірів у скетчах та операціях.
-   **Конфігурації та таблиці параметрів:** Управління різними варіантами виконання моделі в одному файлі (напр., болт різної довжини).

### 4. Перші функції для співпраці

-   **Система контролю версій (схожа на Git):** Check-in/Check-out, створення гілок (`branches`) для експериментальних змін, візуальне порівняння версій.
-   **Коментарі:** Можливість залишати коментарі, прив'язані до конкретної геометрії або фічі.

## Фаза 3: Професійні та спеціалізовані інструменти (Місяці 25-36)

**Мета:** Створити модулі для вирішення вузькоспеціалізованих інженерних задач, що підвищить цінність продукту для професіоналів.

### 1. Модуль симуляції (FEA)

-   **Статичний аналіз напружень:** Базовий розрахунок на міцність для деталей та простих збірок.
-   **Термічний аналіз:** Розрахунок розподілу температур.

### 2. Модуль фотореалістичного рендерингу

-   **Інтеграція з існуючим движком:** Розглянути інтеграцію open-source рушіїв, таких як **Cycles** (з Blender) або **LuxCoreRender**.
-   **Бібліотека матеріалів та освітлення:** Набір готових PBR-матеріалів та налаштувань оточення (HDRI).

### 3. Спеціалізовані інструменти моделювання

-   **Робота з листовим металом (Sheet Metal):** Інструменти для створення згинів, фланців, вирізів та автоматичного отримання розгортки.
-   **Моделювання поверхонь (Surface Modeling):** Інструменти для створення складних криволінійних поверхонь (NURBS).
-   **Зварні конструкції (Weldments):** Робота з профілями, їх обрізка та автоматичне створення списку різання.

### 4. Підготовка до виробництва (CAM)

-   **Базове генерування траєкторій:** Створення G-коду для 2.5-осьової фрезерної обробки (напр., контур, кишеня, свердління).

## Фаза 4: Платформа та Екосистема (Паралельно з Фазою 3 і далі)

**Мета:** Перетворити продукт з інструменту на відкриту платформу.

### 1. Публічний API та SDK

-   **API-First підхід:** Вся нова функціональність має бути одразу доступною через внутрішній API.
-   **Публікація SDK:** Надання добре документованого SDK (Software Development Kit) для розробки плагінів на TypeScript/JavaScript, а в майбутньому — на C++ або Rust.

### 2. Ринок плагінів та додатків (Marketplace)

-   **Платформа для розробників:** Створення веб-порталу, де сторонні розробники можуть публікувати та монетизувати свої плагіни.

### 3. Повноцінна співпраця в реальному часі

-   **Спільне редагування:** Реалізація можливості одночасного редагування однієї моделі кількома користувачами в стилі Google Docs / Figma.
-   **Вбудовані інструменти комунікації:** Текстовий та голосовий чат, режим "презентації".

## Фаза 5: Запуск, Зростання та Підтримка (Постійний процес)

**Мета:** Забезпечити успішний вихід на ринок, стабільне зростання та високий рівень задоволеності користувачів.

### 1. Стратегія виходу на ринок (Go-To-Market)

-   **Програми бета-тестування:** Залучення ранніх користувачів для збору відгуків.
-   **Контент-маркетинг:** Створення якісних уроків, вебінарів та статей, що демонструють переваги продукту.
-   **Робота зі спільнотою:** Активна участь у житті мейкерських та інженерних спільнот.

### 2. Побудова спільноти

-   **Офіційний форум та Discord/Slack сервер:** Створення майданчиків для спілкування користувачів та прямого контакту з командою розробників.
-   **Система збору ідей:** Впровадження публічної платформи для голосування за нові функції.

### 3. Документація та Навчання

-   **База знань:** Створення вичерпної, легкої для пошуку документації.
-   **Інтерактивні туторіали:** Вбудовані в додаток покрокові інструкції для швидкого освоєння базових функцій.

### 4. Довгостроковий план розвитку (Roadmap)

-   **Публічна дорожня карта:** Підтримка актуальності цього документу та публікація його основних тез для користувачів для підвищення прозорості та довіри.
-   **Цикли релізів:** Перехід на регулярні, прогнозовані цикли оновлень (напр., мажорний реліз кожні 6 місяців, мінорні — щомісяця).