# Фаза 1: Архітектурний фундамент та MVP

**Головна мета:** Завершити формування архітектурного ядра, що підтримує різні робочі простори, та визначити наступні кроки для перетворення поточного 2D-редактора на повноцінний параметричний CAD-інструмент. Ця фаза поєднує стратегічне планування з розробкою мінімально життєздатного продукту (MVP) для нового, "класичного" напрямку.

---

## 1.1. Фундамент та Стратегія (Аналітична частина)

Цей блок є основою для всіх подальших технічних рішень і залишається незмінним як стратегічне бачення.

### 1.1.1. Дослідження ринку та визначення цілей

-   **Конкурентний аналіз:** Глибоке вивчення лідерів ринку для розуміння їхніх сильних та слабких сторін (Onshape, Fusion 360, SolidWorks, Blender).
-   **Визначення цільової аудиторії:** Професіонали (інженери, дизайнери), суміжні спеціалісти (архітектори) та мейкери-ентузіасти.

### 1.1.2. Унікальна ціннісна пропозиція (UVP)

Наша UVP: **"Професійний CAD, швидкий як думка та спільний як Google Docs. Ми поєднуємо потужність десктопних систем з гнучкістю хмарних інструментів, ставлячи на перше місце швидкість роботи та інтуїтивність інтерфейсу."**

### 1.1.3. Вибір високорівневого технологічного стеку

-   **Геометричне ядро:** На початкових етапах інтегрувати **Open CASCADE**, паралельно формуючи R&D команду для дослідження розробки власного ядра.
-   **Мова програмування:** **C++/Rust** для ядра та обчислювальних задач; **TypeScript** для UI та логіки додатку.
-   **UI Framework:** Залишаємо поточний стек на базі **Electron/HTML/CSS**, розглядаючи перехід на WebAssembly-орієнтовані фреймворки (напр., Tauri) в довгостроковій перспективі.

---

## 1.2. Розробка MVP для "Класичного креслення"

Цей блок описує ключові компоненти, необхідні для запуску базового, але функціонального CAD-редактора.

### 1.2.2. Базове 2D-скетчування

-   [x] **[РЕАЛІЗОВАНО]** **Інструменти для створення примітивів:** `Polyline`, `Circle`, `Arc`.
-   [x] **[РЕАЛІЗОВАНО]** **Розробка параметричного скетчера:**
    -   **Фундамент:** Створено "режим ескізу", який ізолює процес створення геометрії. Реалізовано об'єкт `SketchObject` для групування елементів ескізу.
    -   **Солвер обмежень:** Інтегровано гібридну систему: швидкий лінійний солвер `cassowary.js` для простих обмежень та ітеративний нелінійний солвер для складних залежностей.
    -   **Підтримка обмежень:** Реалізовано `Горизонтальність`, `Вертикальність`, `Паралельність`, `Перпендикулярність`, `Довжина`, `Кут`, `Дотичність`.
    -   **Результат:** Повністю визначені, стабільні та легко редаговані ескізи.

### 1.2.3. Основи 3D-моделювання

-   [x] **Мета:** Закласти фундамент для параметричного 3D-моделювання на основі 2D-ескізів.

-   [x] **Ключові операції створення тіл:**
    -   [x] **`Extrude` (Видавлювання):** Реалізовано створення 3D-тіла шляхом видавлювання замкнутого 2D-профілю на задану висоту.
    -   [x] **`Revolve` (Обертання):** Реалізовано створення 3D-тіла шляхом обертання 2D-профілю навколо осі.

-   [x] **Наступні кроки (3D-операції):**
    -   [x] **`Cut` (Виріз):** Реалізовано булеву операцію віднімання одного 3D-тіла від іншого з використанням CSG-бібліотеки.
    -   [x] **`Sweep` (Протягування):** Реалізовано створення 3D-тіла шляхом протягування 2D-профілю вздовж 2D-шляху.
    -   [x] **`Loft` (За перерізами):** Реалізовано створення 3D-тіла шляхом побудови поверхні між двома або більше 2D-профілями.
    -   [ ] **`Fillet / Chamfer` (3D):** Реалізувати скруглення та фаски для ребер 3D-тіл. _(Примітка: Ця функція вимагає значної роботи з топологією мешів, що виходить за рамки поточного стеку. Реалізацію відкладено до інтеграції повноцінного геометричного ядра.)_

-   [ ] **Фундамент параметризації:**
    -   [ ] **Параметричне дерево фіч:** Розробити UI-компонент, що відображає послідовність операцій (скетч, видавлювання, скруглення) та дозволяє редагувати їх параметри після створення. Це є ядром параметричного моделювання.

### 1.2.4. Робота з файлами (Сумісність з промисловими стандартами)

**Мета:** Забезпечити безшовний обмін даними з AutoCAD та іншими CAD-системами як основний метод роботи з файлами, відмовившись від пропрієтарного формату `.json`.

**Технологічний стек:**
- **`dxf-parser` / `dxf-writer`:** Для роботи з текстовим форматом DXF.
- **(Дослідження)** Вивчення бібліотек для роботи з бінарним форматом DWG.

- [ ] **Реалізація імпорту DXF:**
    - [ ] Створити `DxfImportService`, що читає файл та перетворює основні сутності DXF (LINE, POLYLINE, CIRCLE, ARC, TEXT, INSERT for blocks, LAYER) на об'єкти сцени `Малювальника`.
    - [ ] Розробити мапінг властивостей: колір, тип лінії, шар.
    - [ ] Реалізувати обробку блоків (BLOCK) та їх вставок (INSERT) у нашу систему блоків.

- [ ] **Реалізація експорту в DXF:**
    - [ ] Створити `DxfExportService`, що виконує зворотне перетворення: з об'єктів нашої сцени у валідну структуру DXF.
    - [ ] Забезпечити коректне збереження шарів, кольорів, типів ліній та геометрії.

- [ ] **(Довгостроково)** Підтримка DWG: Дослідити та інтегрувати рішення для читання/запису файлів `.dwg`.

- [x] **Допоміжний функціонал (реалізовано):**
    - [x] **Експорт у 2D-формати:** Реалізовано експорт у растровий `.png` та векторний `.pdf` з рамкою та умовними позначеннями.
    - [x] **Імпорт підложки:** Реалізовано імпорт `.pdf` як нередагованої підложки для обведення.

- [ ] **Наступні кроки (сумісність з 3D-друком):**
    - [ ] **Базовий експорт у `STL`:** Реалізувати функціонал для експорту 3D-тіл (`ExtrudeObject`, `RevolveObject`) у формат `STL`, що є стандартом для 3D-друку.