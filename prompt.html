<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        :root {
            --background-color: #1a1a1a;
            --toolbar-background: #252526;
            --button-hover-background: #3e3e42;
            --button-active-background: #007acc;
            --text-color: #cccccc;
            --selected-stroke-color: #0099ff;
            --grid-line-color-major: #404040;
        }
        html, body {
            margin: 0;
            padding: 20px;
            overflow: hidden;
            background-color: var(--toolbar-background);
            color: var(--text-color);
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            user-select: none;
        }
        h3 { margin: 0 0 8px 0; font-size: 18px; font-weight: 500; }
        p { margin: 0 0 12px 0; font-size: 14px; opacity: 0.9; line-height: 1.5; }
        input {
            width: 100%; box-sizing: border-box; background-color: var(--background-color);
            border: 1px solid var(--grid-line-color-major); color: var(--text-color);
            border-radius: 4px; padding: 8px; font-size: 14px;
        }
        input:focus { outline: none; border-color: var(--selected-stroke-color); }
        .controls { display: flex; justify-content: flex-end; gap: 8px; margin-top: 16px; }
        button {
            padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer;
            font-size: 14px; font-weight: 500; transition: background-color 0.15s ease;
        }
        #ok-btn { background-color: var(--button-active-background); color: white; }
        #cancel-btn { background-color: var(--button-hover-background); color: var(--text-color); }
        button:hover { opacity: 0.9; }
    </style>
</head>
<body>
    <h3 id="title"></h3>
    <p id="message"></p>
    <input type="text" id="input">
    <div class="controls">
        <button id="cancel-btn"></button>
        <button id="ok-btn"></button>
    </div>
    <script>
        const titleEl = document.getElementById('title');
        const messageEl = document.getElementById('message');
        const inputEl = document.getElementById('input');
        const okBtn = document.getElementById('ok-btn');
        const cancelBtn = document.getElementById('cancel-btn');

        window.promptAPI.onData((options) => {
            titleEl.textContent = options.title;
            messageEl.textContent = options.message;
            inputEl.value = options.defaultValue;
            okBtn.textContent = options.okLabel;
            cancelBtn.textContent = options.cancelLabel;
            inputEl.focus();
            inputEl.select();
        });

        okBtn.addEventListener('click', () => {
            window.promptAPI.sendResponse(inputEl.value);
        });

        cancelBtn.addEventListener('click', () => {
            window.promptAPI.sendResponse(null);
        });

        inputEl.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                okBtn.click();
            } else if (e.key === 'Escape') {
                e.preventDefault();
                cancelBtn.click();
            }
        });
    </script>
</body>
</html>